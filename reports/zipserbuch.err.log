Traceback (most recent call last):
  File "/home/eszter/.local/lib/python3.9/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/eszter/.local/lib/python3.9/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/eszter/.local/lib/python3.9/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/home/eszter/.local/lib/python3.9/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/eszter/.local/lib/python3.9/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/home/eszter/.local/lib/python3.9/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/eszter/.local/lib/python3.9/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
def get_relations_of_person(name):
    person_df = relations_df[relations_df.applymap(lambda x: name in str(x)).any(1)]
    df3=pandas.merge(person_df, records, left_on="record_id",right_on="RMNy")
    grouped_by_record_id = df3.groupby('record_id').groups


    chronology = []
    for record_id in grouped_by_record_id:
        new_item={}
        new_item['id'] = record_id
        new_item['kapcsolat'] = ''
        for id in grouped_by_record_id[record_id]:
            item = df3.iloc[id]
            new_item['√©v'] = item['√©v']
            new_item['esem√©ny'] = item['esem√©ny']
            new_item['a nyomtatv√°ny r√∂vid le√≠r√°sa'] = item['a nyomtatv√°ny r√∂vid le√≠r√°sa']
            if item['sender_name']==name:
                new_item['ir√°ny']='k√ºld≈ë'
                new_item['kapcsolat']+=item['target_name']+'; '
            elif item['target_name']==name:
                new_item['ir√°ny']='fogad√≥'
                new_item['kapcsolat']+=item['sender_name']+'; '   
        chronology.append(new_item)
    
    return pandas.DataFrame.from_records(chronology)
    
    
    
name = 'Seelmann, Christian (1626-1675/76)'
chronology_df = get_relations_of_person(name)

display(
    HTML(
        "<h3>"+ name + " l≈ëcsei kapcsolatai: </h3><br><div style='height: 300px; overflow: auto; width: fit-content'>" +
        chronology_df[['√©v', 'ir√°ny', 'esem√©ny', 'kapcsolat', 'id', 'a nyomtatv√°ny r√∂vid le√≠r√°sa',]].sort_values('√©v').to_html() +
        "</div>"
    )
)
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mNameError[0m                                 Traceback (most recent call last)
Cell [0;32mIn[8], line 33[0m
[1;32m     29[0m name [38;5;241m=[39m [38;5;124m'[39m[38;5;124mSeelmann, Christian (1626-1675/76)[39m[38;5;124m'[39m
[1;32m     30[0m chronology_df [38;5;241m=[39m get_relations_of_person(name)
[1;32m     32[0m display(
[0;32m---> 33[0m     [43mHTML[49m(
[1;32m     34[0m         [38;5;124m"[39m[38;5;124m<h3>[39m[38;5;124m"[39m[38;5;241m+[39m name [38;5;241m+[39m [38;5;124m"[39m[38;5;124m l≈ëcsei kapcsolatai: </h3><br><div style=[39m[38;5;124m'[39m[38;5;124mheight: 300px; overflow: auto; width: fit-content[39m[38;5;124m'[39m[38;5;124m>[39m[38;5;124m"[39m [38;5;241m+[39m
[1;32m     35[0m         chronology_df[[[38;5;124m'[39m[38;5;124m√©v[39m[38;5;124m'[39m, [38;5;124m'[39m[38;5;124mir√°ny[39m[38;5;124m'[39m, [38;5;124m'[39m[38;5;124mesem√©ny[39m[38;5;124m'[39m, [38;5;124m'[39m[38;5;124mkapcsolat[39m[38;5;124m'[39m, [38;5;124m'[39m[38;5;124mid[39m[38;5;124m'[39m, [38;5;124m'[39m[38;5;124ma nyomtatv√°ny r√∂vid le√≠r√°sa[39m[38;5;124m'[39m,]][38;5;241m.[39msort_values([38;5;124m'[39m[38;5;124m√©v[39m[38;5;124m'[39m)[38;5;241m.[39mto_html() [38;5;241m+[39m
[1;32m     36[0m         [38;5;124m"[39m[38;5;124m</div>[39m[38;5;124m"[39m
[1;32m     37[0m     )
[1;32m     38[0m )

[0;31mNameError[0m: name 'HTML' is not defined
NameError: name 'HTML' is not defined

